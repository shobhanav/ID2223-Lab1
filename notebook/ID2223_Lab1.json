{"paragraphs":[{"text":"%md\n## Note\nFor Zeppelin, we add directly the lab1_lib dependency from the kompics snapshot repository","user":"test2","dateUpdated":"2017-11-01T16:50:53+0100","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h2>Note</h2>\n<p>For Zeppelin, we add directly the lab1_lib dependency from the kompics snapshot repository</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1509541117901_1865480744","id":"20171101-135837_1265251908","dateCreated":"2017-11-01T13:58:37+0100","dateStarted":"2017-11-01T16:50:53+0100","dateFinished":"2017-11-01T16:50:53+0100","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:335"},{"text":"%dep\nz.reset();\nz.addRepo(\"kompics snapshot\").url(\"http://kompics.sics.se/maven/snapshotrepository\").snapshot\nz.load(\"se.kth.spark:lab1_lib_2.11:1.0-SNAPSHOT\");","user":"test2","dateUpdated":"2017-11-01T16:50:29+0100","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1509539482165_1245717617","id":"20171101-133122_959314087","dateCreated":"2017-11-01T13:31:22+0100","dateStarted":"2017-11-01T16:50:29+0100","dateFinished":"2017-11-01T16:50:29+0100","status":"ERROR","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:336"},{"text":"%spark\nimport org.apache.spark.ml.feature.RegexTokenizer\nimport org.apache.spark.ml.UnaryTransformer\nimport org.apache.spark.ml.util.Identifiable\nimport org.apache.spark.ml.linalg.Vector\nimport org.apache.spark.ml.linalg.Vectors\nimport scala.collection.mutable.WrappedArray\nimport org.apache.spark.hack.VectorType\nimport se.kth.spark.lab1.Array2Vector\nimport se.kth.spark.lab1.Obs","user":"test2","dateUpdated":"2017-11-01T16:50:29+0100","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1509539557108_1464947869","id":"20171101-133237_767743980","dateCreated":"2017-11-01T13:32:37+0100","dateStarted":"2017-11-01T16:50:29+0100","dateFinished":"2017-11-01T16:50:30+0100","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:337"},{"text":"%md\n## Note\nReplace the filePath to point to your project/dataset","user":"test2","dateUpdated":"2017-11-01T16:50:58+0100","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h2>Note</h2>\n<p>Replace the filePath to point to your project/dataset</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1509541214398_2100131600","id":"20171101-140014_970888192","dateCreated":"2017-11-01T14:00:14+0100","dateStarted":"2017-11-01T16:50:58+0100","dateFinished":"2017-11-01T16:50:58+0100","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:338"},{"text":"val filePath = \"hdfs:///Projects/id2223_lab1/million/millionsong.txt\"\nval rawDF = sc.textFile(filePath).toDF(\"raw\").cache()\nrawDF.show(5)","user":"test2","dateUpdated":"2017-11-01T16:51:38+0100","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1509539581845_-375459362","id":"20171101-133301_1801961269","dateCreated":"2017-11-01T13:33:01+0100","dateStarted":"2017-11-01T16:50:29+0100","dateFinished":"2017-11-01T16:50:34+0100","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:339"},{"text":"val obsValues = sc.textFile(filePath).map(s=>s.split(\",\")).map(\n    s=>Obs(s(0).replaceAll(\"\\\"\", \"\").toDouble, \n            s(1).replaceAll(\"\\\"\", \"\").toDouble,\n            s(2).replaceAll(\"\\\"\", \"\").toDouble,\n            s(3).replaceAll(\"\\\"\", \"\").toDouble\n        )\n)\nobsValues.toDF().registerTempTable(\"songs\")","user":"test2","dateUpdated":"2017-11-01T16:50:29+0100","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1509539615339_892334236","id":"20171101-133335_510784656","dateCreated":"2017-11-01T13:33:35+0100","dateStarted":"2017-11-01T16:50:30+0100","dateFinished":"2017-11-01T16:50:34+0100","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:340"},{"text":"%sql \nselect * from songs limit 10","user":"test2","dateUpdated":"2017-11-01T16:50:29+0100","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"year":"string","f1":"string","f2":"string","f3":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"sql"},"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1509539660634_887609980","id":"20171101-133420_1239364520","dateCreated":"2017-11-01T13:34:20+0100","dateStarted":"2017-11-01T16:50:34+0100","dateFinished":"2017-11-01T16:50:36+0100","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:341"},{"text":"val regexTokenizer = new RegexTokenizer().setInputCol(\"raw\").setOutputCol(\"arraytokens\").setPattern(\",\")\nval tokenizerDF = regexTokenizer.transform(rawDF)\ntokenizerDF.show(5)\n    \nval arr2Vect = new Array2Vector().setInputCol(regexTokenizer.getOutputCol).setOutputCol(\"vectortokens\") \nval array2VectorDF = arr2Vect.transform(tokenizerDF)\narray2VectorDF.show(5)","user":"test2","dateUpdated":"2017-11-01T16:50:29+0100","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1509539681543_277413549","id":"20171101-133441_1341799299","dateCreated":"2017-11-01T13:34:41+0100","dateStarted":"2017-11-01T16:50:35+0100","dateFinished":"2017-11-01T16:50:38+0100","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:342"},{"text":"%md\n## Note\nIf you want to declare a new class, you need to declare it inside an object, otherwise some imports might not work.","user":"test2","dateUpdated":"2017-11-01T16:51:38+0100","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h2>Note</h2>\n<p>If you want to declare a new class, you need to declare it inside an object, otherwise some imports might not work.</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1509551051233_1612767626","id":"20171101-164411_800158675","dateCreated":"2017-11-01T16:44:11+0100","dateStarted":"2017-11-01T16:51:38+0100","dateFinished":"2017-11-01T16:51:38+0100","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:343"},{"text":"object UnaryTransformerExample {\n    class Array2Vector(override val uid: String)extends UnaryTransformer[WrappedArray[String], Vector, Array2Vector] {\n\n        def this() = this(Identifiable.randomUID(\"arrayToVector\"))\n\n        override protected def createTransformFunc: WrappedArray[String] => Vector = {\n            (p1: WrappedArray[String]) => {Vectors.dense(p1.array.map { x => x.toDouble })}\n        }\n\n        override protected def outputDataType: VectorType = {\n            new VectorType\n        }\n    }\n}","user":"test2","dateUpdated":"2017-11-01T16:50:30+0100","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1509539708663_-77294289","id":"20171101-133508_1466511331","dateCreated":"2017-11-01T13:35:08+0100","dateStarted":"2017-11-01T16:50:37+0100","dateFinished":"2017-11-01T16:50:38+0100","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:344"},{"text":"val arr2Vect3 = new UnaryTransformerExample.Array2Vector().setInputCol(regexTokenizer.getOutputCol).setOutputCol(\"vectortokens\") \nval array2VectorDF3 = arr2Vect3.transform(tokenizerDF)\narray2VectorDF3.show(5)","user":"test2","dateUpdated":"2017-11-01T16:50:30+0100","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1509539723343_1788150625","id":"20171101-133523_1980348390","dateCreated":"2017-11-01T13:35:23+0100","dateStarted":"2017-11-01T16:50:38+0100","dateFinished":"2017-11-01T16:50:39+0100","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:345"},{"user":"test2","dateUpdated":"2017-11-01T16:50:30+0100","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1509539753455_231117798","id":"20171101-133553_1182651304","dateCreated":"2017-11-01T13:35:53+0100","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:346"}],"name":"ID2223_Lab1","id":"2CX9743GS","angularObjects":{"2CGD8H8TP:shared_process":[],"2CHUQQW33:shared_process":[],"2CEZ1XY26:shared_process":[],"2CF9AMQ9Q:shared_process":[],"2CFZ6Q3A2:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}